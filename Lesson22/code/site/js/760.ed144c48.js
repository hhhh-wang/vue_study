"use strict";(self["webpackChunkfirst"]=self["webpackChunkfirst"]||[]).push([[760],{5760:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"py-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelector,expression:"isSelector"}],staticClass:"bread"},[t._m(0),e("ul",{staticClass:"fl sui-tag"},[t.$route.query.categoryName?e("li",{staticClass:"with-x"},[t._v(" "+t._s(t.$route.query.categoryName)),e("i",{on:{click:t.moveCategoryName}},[t._v("×")])]):t._e(),t.$route.query.keyword?e("li",{staticClass:"with-x"},[t._v(" "+t._s(t.$route.query.keyword)),e("i",{on:{click:t.moveKeyword}},[t._v("×")])]):t._e(),t.$route.query.trademark?e("li",{staticClass:"with-x"},[t._v(" "+t._s(t.$route.query.trademark.split(":")[1])),e("i",{on:{click:t.moveTrademark}},[t._v("×")])]):t._e(),t._l(t.$route.query.props,(function(s){return e("li",{staticClass:"with-x"},[t._v(" "+t._s(s.split(":")[1])),e("i",{on:{click:function(e){t.$router.goSearch({props:t.$route.query.props.filter((t=>t!==s))})}}},[t._v("×")])])}))],2)]),e("SearchSelector"),e("div",{staticClass:"details clearfix"},[e("div",{staticClass:"sui-navbar"},[e("div",{staticClass:"navbar-inner filter"},[e("ul",{staticClass:"sui-nav"},[e("li",{class:{active:1==t.type},on:{click:function(e){return e.preventDefault(),t.orderSearch(1)}}},[e("a",{attrs:{href:"#"}},[t._v("综合"),e("i",{directives:[{name:"show",rawName:"v-show",value:1==t.type,expression:"type==1"}],class:t.upOrDown})])]),e("li",{class:{active:2==t.type},on:{click:function(e){return e.preventDefault(),t.orderSearch(2)}}},[e("a",{attrs:{href:"#"}},[t._v("价格"),e("i",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type==2"}],class:t.upOrDown})])])])])]),e("div",{staticClass:"goods-list"},[e("ul",{staticClass:"yui3-g"},t._l(t.$store.state.product.searchProductResult.goodsList,(function(s){return e("li",{key:s.id,staticClass:"yui3-u-1-5"},[e("div",{staticClass:"list-wrap"},[e("div",{staticClass:"p-img"},[e("router-link",{attrs:{to:"/detail/"+s.id+".html"}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.defaultImg,expression:"item.defaultImg"}]})])],1),e("div",{staticClass:"price"},[e("strong",[e("em",[t._v("¥")]),e("i",[t._v(t._s(s.price))])])]),e("div",{staticClass:"attr"},[e("a",{attrs:{target:"_blank",href:"item.html",title:s.title},domProps:{innerHTML:t._s(s.title)}})]),e("div",{staticClass:"commit"},[e("i",{staticClass:"command"},[t._v("已有"),e("span",[t._v(t._s(s.hotScore))]),t._v("人评价")])]),e("div",{staticClass:"operate"},[e("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"},on:{click:function(e){return e.preventDefault(),t.addCart(s.id)}}},[t._v("加入购物车")]),e("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[t._v("收藏")])])])])})),0)]),e("Pagination",{attrs:{continue:5,total:t.$store.state.product.searchProductResult.total,pageNo:t.$store.state.product.searchProductResult.pageNo,pageSize:t.$store.state.product.searchProductResult.pageSize},on:{"change-page-no":e=>t.$router.goSearch({pageNo:e})}})],1)],1)])},a=[function(){var t=this,e=t._self._c;return e("ul",{staticClass:"fl sui-breadcrumb"},[e("li",[e("a",{attrs:{href:"#"}},[t._v("全部结果")])])])}],i=(s(6031),function(){var t=this,e=t._self._c;return e("div",{staticClass:"clearfix selector"},[e("div",{staticClass:"type-wrap logo"},[e("div",{staticClass:"fl key brand"},[t._v("品牌")]),e("div",{staticClass:"value logos"},[e("ul",{staticClass:"logo-list"},t._l(t.trademarkList,(function(s){return e("li",{key:s.tmId,on:{click:function(e){return t.$router.push({path:"/search",query:{...t.$route.query,trademark:s.tmId+":"+s.tmName}})}}},[t._v(" "+t._s(s.tmName)+" ")])})),0)])]),t._l(t.attrsList,(function(s){return e("div",{key:s.attrId,staticClass:"type-wrap"},[e("div",{staticClass:"fl key"},[t._v(t._s(s.attrName))]),e("div",{staticClass:"fl value"},[e("ul",{staticClass:"type-list"},t._l(s.attrValueList,(function(r,a){return e("li",{key:a},[e("a",{on:{click:function(e){return t.addPropsGoSearch(s.attrId,r,s.attrName)}}},[t._v(t._s(r))])])})),0)]),e("div",{staticClass:"fl ext"})])}))],2)}),o=[],c=s(5878),l={name:"SearchSelector",methods:{addPropsGoSearch(t,e,s){const r=t+":"+e+":"+s,a=this.$route.query.props||[];a.includes(r)||this.$router.push({path:"/search",query:{...this.$route.query,props:[...a,r]}})}},computed:(0,c.rn)("product",{trademarkList(t){return t.searchProductResult.trademarkList.filter((t=>t.tmName))},attrsList(t){return t.searchProductResult.attrsList}})},u=l,n=s(5440),d=(0,n.Z)(u,i,o,!1,null,"08fb95bd",null),p=d.exports,h={name:"Search",components:{SearchSelector:p},data(){const[t,e]=(this.$route.query.order||"1:desc").split(":");return{type:t/1,flag:e}},methods:{async addCart(t){await this.$store.dispatch("product/getProductInfoByIdAsync",t),sessionStorage.setItem("addCartInfo",JSON.stringify({buyNum:1,attrList:this.$store.state.product.productInfo.spuSaleAttrList,...this.$store.state.product.productInfo.skuInfo})),await this.$store.dispatch("cart/postAddToCartAsync",{skuId:t,skuNum:1}),this.$router.push("/addCartSuccess")},orderSearch(t){console.log(222,this.type,t),this.type===t?(console.log(11111,this.flag),this.flag="desc"===this.flag?"asc":"desc"):(this.type=t,this.flag="desc"),this.$router.goSearch({order:this.type+":"+this.flag})},moveCategoryName(){this.$router.goSearch({categoryName:void 0,category3Id:void 0,category2Id:void 0,category1Id:void 0})},moveKeyword(){this.$router.goSearch({keyword:void 0}),this.$bus.$emit("clearKeyword")},moveTrademark(){this.$router.goSearch({trademark:void 0})}},watch:{"$route.query":{handler(t){const{pageNo:e,pageSize:s}=this.$store.state.product.searchProductResult;t.props&&"string"===typeof t.props&&(t.props=[t.props]),this.$store.dispatch("product/postProductListAsync",{pageNo:e,pageSize:s,...t})},immediate:!0}},beforeDestroy(){this.$bus.$emit("clearKeyword")},computed:{upOrDown(){return"desc"===this.flag?"iconfont icon-icon_down":"iconfont icon-icon_up"},isSelector(){const t={...this.$route.query};return delete t.pageNo,t.props&&0===t.props.length&&delete t.props,Object.values(t).filter((t=>t)).length>0}}},v=h,m=(0,n.Z)(v,r,a,!1,null,"5ee6c170",null),f=m.exports}}]);
//# sourceMappingURL=760.ed144c48.js.map